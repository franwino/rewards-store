(this["webpackJsonpstore-winocur-francisco"]=this["webpackJsonpstore-winocur-francisco"]||[]).push([[0],{147:function(e,t,n){},148:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},161:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n.n(c),s=n(51),o=n.n(s),i=(n(147),n(17)),l=(n(148),n.p+"static/media/aerolab-logo.0a8fb170.svg"),u=n.p+"static/media/header.cc65119a.png",j=n(124),d=n(125);function h(){return Object(a.jsx)(j.a,{icon:d.a,color:"orange"})}function b(e){return Object(a.jsxs)("div",{className:"user",children:[Object(a.jsx)("span",{children:e.name}),Object(a.jsxs)("div",{className:"coinsBtn",children:[e.coins.toLocaleString(),Object(a.jsx)(h,{})]})]})}var p=n(16),O=n.n(p),x=n(30),f=n(177),m=n(179),g=n(181),v=n(182),C=n(131),y={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmM5NzQ0NmY5MGU5ZjAwMjAyNGJkNzAiLCJpYXQiOjE2MDcwMzgwMjJ9.zGf6LOnEgCCOTlyw-HG6cXDFDY9EPoh1pCagvbDt-lY"};function D(){return k.apply(this,arguments)}function k(){return(k=Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/me",{method:"GET",headers:y});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function w(e,t){return N.apply(this,arguments)}function N(){return(N=Object(x.a)(O.a.mark((function e(t,n){var a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:a=e.sent,(c=Object(C.a)({},t)).name=a.name,c.coins=a.points,n(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function P(e){return S.apply(this,arguments)}function S(){return(S=Object(x.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/points",{method:"POST",headers:y,body:JSON.stringify({amount:t})});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function M(){return U.apply(this,arguments)}function U(){return(U=Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:y});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function E(){return(E=Object(x.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M();case 3:n=e.sent,t(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(){return(L=Object(x.a)(O.a.mark((function e(t,n,a){var c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=JSON.stringify({productId:t}),r={method:"POST",headers:y,body:c},e.next=5,fetch("https://coding-challenge-api.aerolab.co/redeem",r);case 5:return w(n,a),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.log("Error: ",e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function A(){return(A=Object(x.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/history",{method:"GET",headers:y});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,t(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function H(){return(H=Object(x.a)(O.a.mark((function e(t,n,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:return e.next=4,w(n,a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=e.localUserData,n=e.setLocalUserData,r=Object(c.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1];return Object(a.jsxs)(f.a,{onClose:function(){return l(!1)},onOpen:function(){return l(!0)},open:o,F:!0,trigger:Object(a.jsx)(m.a,{children:"+"}),children:[Object(a.jsx)(f.a.Header,{children:"Sumar monedas"}),Object(a.jsx)(f.a.Content,{children:Object(a.jsxs)(f.a.Description,{children:[Object(a.jsx)(g.a,{children:"Obtener monedas"}),Object(a.jsx)("p",{children:"Eleg\xed cu\xe1ntas monedas quer\xe9s sumar con los siguientes botones"}),Object(a.jsx)(v.a,{container:!0,columns:3,children:[1e3,5e3,7500].map((function(e){return Object(a.jsx)(v.a.Column,{children:Object(a.jsxs)(m.a,{className:"coinsBtn",labelPosition:"right",onClick:function(){!function(e,t,n){H.apply(this,arguments)}(e,t,n),l(!1)},children:[e,Object(a.jsx)(h,{})]})},e)}))})]})}),Object(a.jsx)(f.a.Actions,{children:Object(a.jsx)(m.a,{color:"black",onClick:function(){return l(!1)},children:"Cancelar"})})]})}var I=n(178),B=n(175),G=n(128),T=n.n(G);var Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Object(c.useState)(1),a=Object(i.a)(n,2),r=a[0],s=a[1],o=Math.ceil(e.length/t);function l(){var n=(r-1)*t,a=n+t;return e.slice(n,a)}function u(){s((function(e){return Math.min(e+1,o)}))}function j(){s((function(e){return Math.max(e-1,1)}))}function d(e){var t=Math.max(1,e);s((function(e){return Math.min(t,o)}))}return{next:u,prev:j,jump:d,currentData:l,currentPage:r,maxPage:o}};function z(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(1),d=Object(i.a)(j,2),h=d[0],b=d[1],p=Math.ceil(n.length/12),O=Y(n,12);return Object(a.jsxs)(f.a,{onClose:function(){return u(!1)},onOpen:function(){return u(!0)},open:l,trigger:Object(a.jsx)(m.a,{onClick:function(){return function(e){return A.apply(this,arguments)}(r)},children:"Historial"}),children:[Object(a.jsx)(f.a.Header,{children:"Tu historial de canjes"}),Object(a.jsxs)(f.a.Content,{children:[Object(a.jsxs)(I.a,{striped:!0,unstackable:!0,children:[Object(a.jsx)(I.a.Header,{children:Object(a.jsxs)(I.a.Row,{children:[Object(a.jsx)(I.a.HeaderCell,{children:"Producto"}),Object(a.jsx)(I.a.HeaderCell,{children:"Fecha de Canje"}),Object(a.jsx)(I.a.HeaderCell,{children:"Costo"})]})}),Object(a.jsx)(I.a.Body,{children:O.currentData().map((function(e){return Object(a.jsxs)(I.a.Row,{children:[Object(a.jsx)(I.a.Cell,{children:e.name}),Object(a.jsx)(I.a.Cell,{children:T()(e.createDate).format("DD/MM/YYYY")}),Object(a.jsx)(I.a.Cell,{children:e.cost})]},e.createDate)}))})]}),Object(a.jsxs)("div",{className:"paginationBar",children:[Object(a.jsx)(B.a,{activePage:h,totalPages:p,onPageChange:function(e,t){b(t.activePage),O.jump(t.activePage)}}),Object(a.jsxs)("p",{children:["Mostrando canjes ",12*(h-1)+1," a"," ",h<p?12*h:n.length," de"," ",n.length]})]})]}),Object(a.jsx)(f.a.Actions,{children:Object(a.jsx)(m.a,{color:"black",onClick:function(){return u(!1)},children:"Cerrar"})})]})}function F(e){var t=e.localUserData,n=e.setLocalUserData;return Object(a.jsxs)("section",{className:"header",children:[Object(a.jsxs)("div",{className:"topbar",children:[Object(a.jsx)("img",{src:l,alt:"logo"}),Object(a.jsx)(z,{}),Object(a.jsxs)("div",{className:"user-coins",children:[Object(a.jsx)(b,{name:t.name,coins:t.coins}),Object(a.jsx)(J,{localUserData:t,setLocalUserData:n})]})]}),Object(a.jsx)("img",{src:u,className:"heroImage",alt:"Products"})]})}var Q=n.p+"static/media/buy-blue.c5c4f01c.svg";n(159);function R(e){var t=e.id,n=e.state,r=e.setState,s=Object(c.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(!1),d=Object(i.a)(j,2),h=d[0],b=d[1];return Object(a.jsxs)(f.a,{size:"mini",open:l,trigger:Object(a.jsx)(m.a,{onClick:function(){b(function(e,t,n){return L.apply(this,arguments)}(t,n,r)),u(!0)},children:"Canjear Ahora"}),children:[Object(a.jsx)(f.a.Header,{children:h?"Listo!":"Algo sali\xf3 mal..."}),Object(a.jsx)(f.a.Content,{children:Object(a.jsx)("p",{children:h?"Canjeaste tu prodcucto exitosamente. Que lo disfrutes!":"Hubo un problema a la hora de canjear el producto, intent\xe1 de nuevo m\xe1s tarde."})}),Object(a.jsx)(f.a.Actions,{children:Object(a.jsx)(m.a,{positive:!0,onClick:function(){return u(!1)},children:"Cerrar"})})]})}function X(e){var t=e.availableCoins,n=e.productData,c=e.localUserData,r=e.setLocalUserData,s=t>n.cost;return Object(a.jsxs)("article",{className:"product",children:[Object(a.jsx)("div",{className:"canBuy",children:s?Object(a.jsx)("img",{src:Q,alt:"Comprar"}):Object(a.jsxs)("div",{className:"cantAfford",children:["Faltan ",n.cost-t,Object(a.jsx)(h,{})]})}),Object(a.jsx)("img",{src:n.img.url,alt:n.name}),Object(a.jsx)("h5",{children:n.category}),Object(a.jsx)("h4",{children:n.name}),Object(a.jsxs)("div",{className:"productHover",children:[Object(a.jsxs)("div",{className:"cost",children:[n.cost.toLocaleString(),Object(a.jsx)(h,{})]}),s?Object(a.jsx)(R,{id:n._id,state:c,setState:r}):""]})]})}var _=n(130),Z=n(174);function q(e){var t=e.prodList,n=(e.setFilters,Object(_.a)(new Set(t.map((function(e){return e.category})))).sort().map((function(e){return[{key:e,value:e,text:e}]})));return Object(a.jsxs)("section",{className:"filterList",children:[Object(a.jsx)(Z.a,{options:n}),Object(a.jsx)(Z.a,{options:[{key:"none",value:"none",text:"Orden Predeterminado"},{key:"low",value:"low",text:"M\xe1s baratos primero"},{key:"high",value:"high",text:"M\xe1s caros primero"}]})]})}n(160);var V=[{_id:"",name:"",cost:0,category:"",img:{url:"",hdUrl:""}}],W={category:"All",price:"none"};function K(e){var t=e.availableCoins,n=e.localUserData,r=e.setLocalUserData,s=Object(c.useState)(V),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(W),d=Object(i.a)(j,2),h=(d[0],d[1]),b=Object(c.useState)(1),p=Object(i.a)(b,2),O=p[0],x=p[1],f=Math.ceil(l.length/16),m=Y(l,16),g=function(e,t){x(t.activePage),m.jump(t.activePage)};return Object(c.useEffect)((function(){!function(e){E.apply(this,arguments)}(u)}),[]),Object(a.jsxs)("section",{className:"productList",children:[Object(a.jsx)(q,{prodList:l,setFilters:h}),Object(a.jsxs)("div",{className:"paginationBar",children:[Object(a.jsx)(B.a,{activePage:O,totalPages:f,onPageChange:g}),Object(a.jsxs)("p",{children:[O<f?16*O:l.length," de"," ",l.length," productos"]})]}),Object(a.jsx)("div",{className:"products",children:m.currentData().map((function(e){return Object(a.jsx)(X,{availableCoins:t,productData:e,localUserData:n,setLocalUserData:r},e._id)}))}),Object(a.jsxs)("div",{className:"paginationBar",children:[Object(a.jsx)(B.a,{activePage:O,totalPages:f,onPageChange:g}),Object(a.jsxs)("p",{children:[O<f?16*O:l.length," de"," ",l.length," productos"]})]})]})}n(161);var $=function(){var e=Object(c.useState)({name:"",coins:0}),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){w(n,r)}),[]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(F,{localUserData:n,setLocalUserData:r}),Object(a.jsx)(K,{availableCoins:n.coins,localUserData:n,setLocalUserData:r})]})};n(162);o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)($,{})}),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.5cb4402f.chunk.js.map