(this["webpackJsonpstore-winocur-francisco"]=this["webpackJsonpstore-winocur-francisco"]||[]).push([[0],{147:function(e,t,a){},148:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),r=a.n(c),s=a(51),o=a.n(s),i=(a(147),a(16)),l=(a(148),a.p+"static/media/aerolab-logo.0a8fb170.svg"),u=a.p+"static/media/header.cc65119a.png",j=a(126),h=a(127);function d(){return Object(n.jsx)(j.a,{icon:h.a,color:"orange"})}function b(e){return Object(n.jsxs)("div",{className:"user",children:[Object(n.jsx)("span",{children:e.name}),Object(n.jsxs)("div",{className:"coinsBtn",children:[e.coins.toLocaleString(),Object(n.jsx)(d,{})]})]})}var p=a(17),O=a.n(p),f=a(30),x=a(176),m=a(178),g=a(180),v=a(181),y=a(109),C={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmM5NzQ0NmY5MGU5ZjAwMjAyNGJkNzAiLCJpYXQiOjE2MDcwMzgwMjJ9.zGf6LOnEgCCOTlyw-HG6cXDFDY9EPoh1pCagvbDt-lY"};function D(){return k.apply(this,arguments)}function k(){return(k=Object(f.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/me",{method:"GET",headers:C});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function w(e,t){return N.apply(this,arguments)}function N(){return(N=Object(f.a)(O.a.mark((function e(t,a){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:n=e.sent,(c=Object(y.a)({},t)).name=n.name,c.coins=n.points,a(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function S(e){return P.apply(this,arguments)}function P(){return(P=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/points",{method:"POST",headers:C,body:JSON.stringify({amount:t})});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function E(){return M.apply(this,arguments)}function M(){return(M=Object(f.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:C});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function U(){return(U=Object(f.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E();case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(){return(L=Object(f.a)(O.a.mark((function e(t,a,n){var c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=JSON.stringify({productId:t}),r={method:"POST",headers:C,body:c},e.next=5,fetch("https://coding-challenge-api.aerolab.co/redeem",r);case 5:return w(a,n),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(0),console.log("Error: ",e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function z(){return(z=Object(f.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/history",{method:"GET",headers:C});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function A(){return(A=Object(f.a)(O.a.mark((function e(t,a,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:return e.next=4,w(a,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t=e.localUserData,a=e.setLocalUserData,r=Object(c.useState)(!1),s=Object(i.a)(r,2),o=s[0],l=s[1];return Object(n.jsxs)(x.a,{onClose:function(){return l(!1)},onOpen:function(){return l(!0)},open:o,F:!0,trigger:Object(n.jsx)(m.a,{children:"+"}),children:[Object(n.jsx)(x.a.Header,{children:"Sumar monedas"}),Object(n.jsx)(x.a.Content,{children:Object(n.jsxs)(x.a.Description,{children:[Object(n.jsx)(g.a,{children:"Obtener monedas"}),Object(n.jsx)("p",{children:"Eleg\xed cu\xe1ntas monedas quer\xe9s sumar con los siguientes botones"}),Object(n.jsx)(v.a,{container:!0,columns:3,children:[1e3,5e3,7500].map((function(e){return Object(n.jsx)(v.a.Column,{children:Object(n.jsxs)(m.a,{className:"coinsBtn",labelPosition:"right",onClick:function(){!function(e,t,a){A.apply(this,arguments)}(e,t,a),l(!1)},children:[e,Object(n.jsx)(d,{})]})},e)}))})]})}),Object(n.jsx)(x.a.Actions,{children:Object(n.jsx)(m.a,{color:"black",onClick:function(){return l(!1)},children:"Cancelar"})})]})}var J=a(177),I=a(174),B=a(130),T=a.n(B);var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=Object(c.useState)(1),n=Object(i.a)(a,2),r=n[0],s=n[1],o=Math.ceil(e.length/t);function l(){var a=(r-1)*t,n=a+t;return e.slice(a,n)}function u(){s((function(e){return Math.min(e+1,o)}))}function j(){s((function(e){return Math.max(e-1,1)}))}function h(e){var t=Math.max(1,e);s((function(e){return Math.min(t,o)}))}return{next:u,prev:j,jump:h,currentData:l,currentPage:r,maxPage:o}};function Y(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(1),h=Object(i.a)(j,2),d=h[0],b=h[1],p=Math.ceil(a.length/12),O=G(a,12);return Object(n.jsxs)(x.a,{onClose:function(){return u(!1)},onOpen:function(){return u(!0)},open:l,trigger:Object(n.jsx)(m.a,{onClick:function(){return function(e){return z.apply(this,arguments)}(r)},children:"Historial"}),children:[Object(n.jsx)(x.a.Header,{children:"Tu historial de canjes"}),Object(n.jsxs)(x.a.Content,{children:[Object(n.jsxs)(J.a,{striped:!0,unstackable:!0,children:[Object(n.jsx)(J.a.Header,{children:Object(n.jsxs)(J.a.Row,{children:[Object(n.jsx)(J.a.HeaderCell,{children:"Producto"}),Object(n.jsx)(J.a.HeaderCell,{children:"Fecha de Canje"}),Object(n.jsx)(J.a.HeaderCell,{children:"Costo"})]})}),Object(n.jsx)(J.a.Body,{children:O.currentData().map((function(e){return Object(n.jsxs)(J.a.Row,{children:[Object(n.jsx)(J.a.Cell,{children:e.name}),Object(n.jsx)(J.a.Cell,{children:T()(e.createDate).format("DD/MM/YYYY")}),Object(n.jsx)(J.a.Cell,{children:e.cost})]},e.createDate)}))})]}),Object(n.jsxs)("div",{className:"paginationBar",children:[Object(n.jsx)(I.a,{activePage:d,totalPages:p,onPageChange:function(e,t){b(t.activePage),O.jump(t.activePage)}}),Object(n.jsxs)("p",{children:["Mostrando canjes ",12*(d-1)+1," a"," ",d<p?12*d:a.length," de"," ",a.length]})]})]}),Object(n.jsx)(x.a.Actions,{children:Object(n.jsx)(m.a,{color:"black",onClick:function(){return u(!1)},children:"Cerrar"})})]})}function F(e){var t=e.localUserData,a=e.setLocalUserData;return Object(n.jsxs)("section",{className:"header",children:[Object(n.jsxs)("div",{className:"topbar",children:[Object(n.jsx)("img",{src:l,alt:"logo"}),Object(n.jsx)(Y,{}),Object(n.jsxs)("div",{className:"user-coins",children:[Object(n.jsx)(b,{name:t.name,coins:t.coins}),Object(n.jsx)(H,{localUserData:t,setLocalUserData:a})]})]}),Object(n.jsx)("img",{src:u,className:"heroImage",alt:"Products"})]})}var Q=a(81),Z=a.p+"static/media/buy-blue.c5c4f01c.svg";a(159);function R(e){var t=e.id,a=e.state,r=e.setState,s=Object(c.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(!1),h=Object(i.a)(j,2),d=h[0],b=h[1];return Object(n.jsxs)(x.a,{size:"mini",open:l,trigger:Object(n.jsx)(m.a,{onClick:function(){b(function(e,t,a){return L.apply(this,arguments)}(t,a,r)),u(!0)},children:"Canjear Ahora"}),children:[Object(n.jsx)(x.a.Header,{children:d?"Listo!":"Algo sali\xf3 mal..."}),Object(n.jsx)(x.a.Content,{children:Object(n.jsx)("p",{children:d?"Canjeaste tu prodcucto exitosamente. Que lo disfrutes!":"Hubo un problema a la hora de canjear el producto, intent\xe1 de nuevo m\xe1s tarde."})}),Object(n.jsx)(x.a.Actions,{children:Object(n.jsx)(m.a,{positive:!0,onClick:function(){return u(!1)},children:"Cerrar"})})]})}function X(e){var t=e.availableCoins,a=e.productData,c=e.localUserData,r=e.setLocalUserData,s=t>a.cost;return Object(n.jsxs)("article",{className:"product",children:[Object(n.jsx)("div",{className:"canBuy",children:s?Object(n.jsx)("img",{src:Z,alt:"Comprar"}):Object(n.jsxs)("div",{className:"cantAfford",children:["Faltan ",a.cost-t,Object(n.jsx)(d,{})]})}),Object(n.jsx)("img",{src:a.img.url,alt:a.name}),Object(n.jsx)("h5",{children:a.category}),Object(n.jsx)("h4",{children:a.name}),Object(n.jsxs)("div",{className:"productHover",children:[Object(n.jsxs)("div",{className:"cost",children:[a.cost.toLocaleString(),Object(n.jsx)(d,{})]}),s?Object(n.jsx)(R,{id:a._id,state:c,setState:r}):""]})]})}var _=a(173);function q(e){var t=e.prodList,a=e.filters,c=e.handleFilters,r=Object(Q.a)(new Set(t.map((function(e){return e.category})))).sort().map((function(e){return{key:e,value:e,text:e}}));r.unshift({key:"none",value:"none",text:"Todas las Categor\xedas"});return Object(n.jsxs)("section",{className:"filterList",children:[Object(n.jsx)(_.a,{selection:!0,name:"category",placeholder:"Elegir categor\xedas",options:r,onChange:c,value:a.category}),Object(n.jsx)(_.a,{selection:!0,name:"sort",placeholder:"Ordenar por...",options:[{key:"az",value:"az",text:"De la A a la Z"},{key:"za",value:"za",text:"De la Z a la A"},{key:"low",value:"low",text:"M\xe1s baratos primero"},{key:"high",value:"high",text:"M\xe1s caros primero"}],onChange:c,value:a.sort})]})}a(160);var V=[{_id:"",name:"",cost:0,category:"",img:{url:"",hdUrl:""}}],W={category:"none",sort:"az"};function K(e){var t=e.availableCoins,a=e.localUserData,r=e.setLocalUserData,s=Object(c.useState)(V),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)([]),h=Object(i.a)(j,2),d=h[0],b=h[1],p=Object(c.useState)(W),O=Object(i.a)(p,2),f=O[0],x=O[1];function m(e){return"none"===f.category||e.category===f.category}function g(e,t){switch(f.sort){case"az":return e.name>t.name?1:e.name<t.name?-1:0;case"za":return e.name<t.name?1:e.name>t.name?-1:0;case"low":return e.cost-t.cost;case"high":return t.cost-e.cost;default:return 0}}Object(c.useEffect)((function(){var e=l.filter(m);e.sort(g),b(e)}),[f]);var v=Object(c.useState)(1),C=Object(i.a)(v,2),D=C[0],k=C[1],w=Math.ceil(d.length/16),N=G(d,16),S=function(e,t){k(t.activePage),N.jump(t.activePage)};return Object(c.useEffect)((function(){!function(e){U.apply(this,arguments)}(u),b(Object(Q.a)(l))}),[]),Object(c.useEffect)((function(){b(Object(Q.a)(l))}),[l]),Object(n.jsxs)("section",{className:"productList",children:[Object(n.jsx)(q,{prodList:l,filters:f,handleFilters:function(e,t){var a=t.value,n=t.name,c=Object(y.a)({},f);c[n]=a,x(c)}}),Object(n.jsxs)("div",{className:"paginationBar",children:[Object(n.jsx)(I.a,{activePage:D,totalPages:w,onPageChange:S}),Object(n.jsxs)("p",{children:[D<w?16*D:d.length," de"," ",d.length," productos"]})]}),Object(n.jsx)("div",{className:"products",children:N.currentData().map((function(e){return Object(n.jsx)(X,{availableCoins:t,productData:e,localUserData:a,setLocalUserData:r},e._id)}))}),Object(n.jsxs)("div",{className:"paginationBar",children:[Object(n.jsx)(I.a,{activePage:D,totalPages:w,onPageChange:S}),Object(n.jsxs)("p",{children:[D<w?16*D:d.length," de"," ",d.length," productos"]})]})]})}a(161);var $=function(){var e=Object(c.useState)({name:"",coins:0}),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){w(a,r)}),[]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(F,{localUserData:a,setLocalUserData:r}),Object(n.jsx)(K,{availableCoins:a.coins,localUserData:a,setLocalUserData:r})]})};a(162);o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)($,{})}),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.3aac996a.chunk.js.map