(this["webpackJsonpstore-winocur-francisco"]=this["webpackJsonpstore-winocur-francisco"]||[]).push([[0],{147:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),s=a(51),o=a.n(s),i=a(16),l=(a(147),a.p+"static/media/aerolab-logo.0a8fb170.svg"),u=a.p+"static/media/header.cc65119a.png",j=a(126),d=a(127);function h(){return Object(n.jsx)(j.a,{className:"iconCoins",icon:d.a,color:"orange"})}function b(e){return Object(n.jsxs)("div",{className:"nameCoins",children:[Object(n.jsx)("span",{children:e.name}),Object(n.jsxs)("div",{className:"coinsBtn",children:[e.coins.toLocaleString(),Object(n.jsx)(h,{})]})]})}var p=a(17),O=a.n(p),f=a(30),x=a(175),m=a(177),v=a(179),g=a(180),C=a(109),y={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZmM5NzQ0NmY5MGU5ZjAwMjAyNGJkNzAiLCJpYXQiOjE2MDcwMzgwMjJ9.zGf6LOnEgCCOTlyw-HG6cXDFDY9EPoh1pCagvbDt-lY"},D="https://coding-challenge-api.aerolab.co";function w(){return k.apply(this,arguments)}function k(){return(k=Object(f.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(D+"/user/me",{method:"GET",headers:y});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function N(e,t){return I.apply(this,arguments)}function I(){return(I=Object(f.a)(O.a.mark((function e(t,a){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:n=e.sent,(r=Object(C.a)({},t)).name=n.name,r.coins=n.points,a(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function U(e){return L.apply(this,arguments)}function L(){return(L=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(D+"/user/points",{method:"POST",headers:y,body:JSON.stringify({amount:t})});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error: ",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function S(){return A.apply(this,arguments)}function A(){return(A=Object(f.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(D+"/products",{method:"GET",headers:y});case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function E(){return(E=Object(f.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function M(){return(M=Object(f.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.stringify({productId:t}),n={method:"POST",headers:y,body:a},e.next=5,fetch(D+"/redeem",n);case 5:return e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),console.log("Error: ",e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function P(){return(P=Object(f.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(D+"/user/history",{method:"GET",headers:y});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function H(){return(H=Object(f.a)(O.a.mark((function e(t,a,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t);case 2:return e.next=4,N(a,n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){var t=e.localUserData,a=e.setLocalUserData,c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1];return Object(n.jsxs)(x.a,{onClose:function(){return l(!1)},onOpen:function(){return l(!0)},open:o,F:!0,trigger:Object(n.jsx)(m.a,{children:"+"}),children:[Object(n.jsx)(x.a.Header,{children:"Sumar monedas"}),Object(n.jsx)(x.a.Content,{children:Object(n.jsxs)(x.a.Description,{children:[Object(n.jsx)(v.a,{children:"Obtener monedas"}),Object(n.jsx)("p",{children:"Eleg\xed cu\xe1ntas monedas quer\xe9s sumar con los siguientes botones"}),Object(n.jsx)(g.a,{container:!0,columns:3,children:[1e3,5e3,7500].map((function(e){return Object(n.jsx)(g.a.Column,{children:Object(n.jsxs)(m.a,{className:"coinsBtn",onClick:function(){!function(e,t,a){H.apply(this,arguments)}(e,t,a),l(!1)},children:[e,Object(n.jsx)(h,{})]})},e)}))})]})}),Object(n.jsx)(x.a.Actions,{children:Object(n.jsx)(m.a,{color:"black",onClick:function(){return l(!1)},children:"Cancelar"})})]})}var B=a(176),Z=a(173),T=a(130),z=a.n(T);var G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=Object(r.useState)(1),n=Object(i.a)(a,2),c=n[0],s=n[1],o=Math.ceil(e.length/t);function l(){var a=(c-1)*t,n=a+t;return e.slice(a,n)}function u(){s((function(e){return Math.min(e+1,o)}))}function j(){s((function(e){return Math.max(e-1,1)}))}function d(e){var t=Math.max(1,e);s((function(e){return Math.min(t,o)}))}return{next:u,prev:j,jump:d,currentData:l,currentPage:c,maxPage:o}};function Y(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(r.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(r.useState)(1),d=Object(i.a)(j,2),h=d[0],b=d[1],p=Math.ceil(a.length/12),O=G(a,12);return Object(n.jsxs)(x.a,{className:"history",onClose:function(){return u(!1)},onOpen:function(){return u(!0)},open:l,trigger:Object(n.jsx)(m.a,{onClick:function(){return function(e){return P.apply(this,arguments)}(c)},children:"Historial de Canjes"}),children:[Object(n.jsx)(x.a.Header,{children:"Tu historial de canjes"}),Object(n.jsxs)(x.a.Content,{children:[Object(n.jsxs)(B.a,{striped:!0,unstackable:!0,children:[Object(n.jsx)(B.a.Header,{children:Object(n.jsxs)(B.a.Row,{children:[Object(n.jsx)(B.a.HeaderCell,{children:"Producto"}),Object(n.jsx)(B.a.HeaderCell,{children:"Fecha de Canje"}),Object(n.jsx)(B.a.HeaderCell,{children:"Costo"})]})}),Object(n.jsx)(B.a.Body,{children:O.currentData().map((function(e){return Object(n.jsxs)(B.a.Row,{children:[Object(n.jsx)(B.a.Cell,{children:e.name}),Object(n.jsx)(B.a.Cell,{children:z()(e.createDate).format("DD/MM/YYYY")}),Object(n.jsx)(B.a.Cell,{children:e.cost})]},e.createDate)}))})]}),Object(n.jsxs)("div",{className:"history__paginationBar paginationBar",children:[Object(n.jsx)(Z.a,{activePage:h,totalPages:p,onPageChange:function(e,t){b(t.activePage),O.jump(t.activePage)},boundaryRange:0,ellipsisItem:null,firstItem:1===h?null:void 0,prevItem:1===h?null:void 0,lastItem:h===p?null:void 0,nextItem:h===p?null:void 0}),Object(n.jsxs)("p",{children:["Mostrando canjes ",12*(h-1)+1," a"," ",h<p?12*h:a.length," de"," ",a.length]})]})]}),Object(n.jsx)(x.a.Actions,{children:Object(n.jsx)(m.a,{color:"black",onClick:function(){return u(!1)},children:"Cerrar"})})]})}function F(e){var t=e.localUserData,a=e.setLocalUserData;return Object(n.jsxs)("header",{className:"header",children:[Object(n.jsxs)("nav",{className:"topbar",children:[Object(n.jsx)("img",{src:l,alt:"logo"}),Object(n.jsxs)("div",{className:"topMenu",children:[Object(n.jsx)(Y,{}),Object(n.jsxs)("div",{className:"user-coins-add",children:[Object(n.jsx)(b,{name:t.name,coins:t.coins}),Object(n.jsx)(J,{localUserData:t,setLocalUserData:a})]})]})]}),Object(n.jsx)("img",{src:u,className:"heroImage",alt:"Products"})]})}var _=a(81),Q=a.p+"static/media/buy-blue.c5c4f01c.svg";a(158);function R(e){var t=e.id,a=e.localUserData,c=e.setLocalUserData,s=Object(r.useState)(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(r.useState)(!1),d=Object(i.a)(j,2),h=d[0],b=d[1];return Object(n.jsxs)(x.a,{size:"mini",open:l,onClose:function(){N(a,c),u(!1)},trigger:Object(n.jsx)(m.a,{onClick:function(){b(function(e){return M.apply(this,arguments)}(t)),u(!0)},children:"Canjear Ahora"}),children:[Object(n.jsx)(x.a.Header,{children:h?"Listo!":"Algo sali\xf3 mal..."}),Object(n.jsx)(x.a.Content,{children:Object(n.jsx)("p",{children:h?"Canjeaste tu producto exitosamente. Que lo disfrutes!":"Hubo un problema a la hora de canjear el producto, intent\xe1 de nuevo m\xe1s tarde."})}),Object(n.jsx)(x.a.Actions,{children:Object(n.jsx)(m.a,{positive:!0,onClick:function(){N(a,c),u(!1)},children:"Cerrar"})})]})}function X(e){var t=e.availableCoins,a=e.productData,r=e.localUserData,c=e.setLocalUserData,s=t>=a.cost;return Object(n.jsxs)("article",{className:"product",children:[Object(n.jsx)("div",{className:"canBuy",children:s?Object(n.jsx)("img",{src:Q,alt:"Comprar"}):Object(n.jsxs)("div",{className:"cantAfford",children:["Faltan ",a.cost-t,Object(n.jsx)(h,{})]})}),Object(n.jsx)("img",{src:a.img.url,alt:a.name}),Object(n.jsx)("h5",{children:a.category}),Object(n.jsx)("h4",{children:a.name}),Object(n.jsxs)("div",{className:"productHover",children:[Object(n.jsxs)("div",{className:"cost",children:[a.cost.toLocaleString(),Object(n.jsx)(h,{})]}),s?Object(n.jsx)(R,{id:a._id,localUserData:r,setLocalUserData:c}):""]})]})}var q=a(172);function V(e){var t=e.prodList,a=e.filters,r=e.handleFilters,c=Object(_.a)(new Set(t.map((function(e){return e.category})))).sort().map((function(e){return{key:e,value:e,text:e}}));c.unshift({key:"none",value:"none",text:"Todas las Categor\xedas"});return Object(n.jsxs)("section",{className:"filterList",children:[Object(n.jsx)(q.a,{selection:!0,name:"category",placeholder:"Elegir categor\xedas",options:c,onChange:r,value:a.category}),Object(n.jsx)(q.a,{selection:!0,name:"sort",placeholder:"Ordenar por...",options:[{key:"fromAtoZ",value:"fromAtoZ",text:"De la A a la Z"},{key:"fromZtoA",value:"fromZtoA",text:"De la Z a la A"},{key:"low",value:"low",text:"M\xe1s baratos primero"},{key:"high",value:"high",text:"M\xe1s caros primero"}],onChange:r,value:a.sort})]})}a(159);var W=[{_id:"",name:"",cost:0,category:"",img:{url:"",hdUrl:""}}],K={category:"none",sort:"az"};function $(e){var t=e.availableCoins,a=e.localUserData,c=e.setLocalUserData,s=Object(r.useState)(W),o=Object(i.a)(s,2),l=o[0],u=o[1],j=Object(r.useState)([]),d=Object(i.a)(j,2),h=d[0],b=d[1];Object(r.useEffect)((function(){!function(e){E.apply(this,arguments)}(u),b(Object(_.a)(l))}),[]),Object(r.useEffect)((function(){b(Object(_.a)(l)),g()}),[l]);var p=Object(r.useState)(K),O=Object(i.a)(p,2),f=O[0],x=O[1];function m(e){return"none"===f.category||e.category===f.category}function v(e,t){var a=e.name.toLowerCase(),n=t.name.toLowerCase(),r=e.cost,c=t.cost;switch(f.sort){case"fromAtoZ":return a>n?1:a<n?-1:0;case"fromZtoA":return a<n?1:a>n?-1:0;case"low":return r-c;case"high":return c-r;default:return 0}}function g(){var e=l.filter(m);e.sort(v),b(e)}Object(r.useEffect)((function(){g()}),[f]);var y=Object(r.useState)(1),D=Object(i.a)(y,2),w=D[0],k=D[1],N=Math.ceil(h.length/16),I=G(h,16),U=function(e,t){k(t.activePage),I.jump(t.activePage)};return Object(n.jsxs)("main",{className:"productList",children:[Object(n.jsx)(V,{prodList:l,filters:f,handleFilters:function(e,t){var a=t.value,n=t.name,r=Object(C.a)({},f);r[n]=a,x(r)}}),Object(n.jsxs)("div",{className:"paginationBar",children:[Object(n.jsx)(Z.a,{activePage:w,totalPages:N,onPageChange:U,firstItem:1!==w?void 0:null,prevItem:1!==w?void 0:null,lastItem:w!==N?void 0:null,nextItem:w!==N?void 0:null}),Object(n.jsxs)("p",{children:[w<N?16*w:h.length," de"," ",h.length," productos"]})]}),Object(n.jsx)("section",{className:"products",children:I.currentData().map((function(e){return Object(n.jsx)(X,{availableCoins:t,productData:e,localUserData:a,setLocalUserData:c},e._id)}))}),Object(n.jsxs)("div",{className:"paginationBar",children:[Object(n.jsx)(Z.a,{activePage:w,totalPages:N,onPageChange:U,firstItem:1!==w?void 0:null,prevItem:1!==w?void 0:null,lastItem:w!==N?void 0:null,nextItem:w!==N?void 0:null}),Object(n.jsxs)("p",{children:[w<N?16*w:h.length," de"," ",h.length," productos"]})]})]})}a(160);var ee=function(){var e=Object(r.useState)({name:"",coins:0}),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(r.useEffect)((function(){N(a,c)}),[]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(F,{localUserData:a,setLocalUserData:c}),Object(n.jsx)($,{availableCoins:a.coins,localUserData:a,setLocalUserData:c})]})};a(161);o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(ee,{})}),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.affa4c85.chunk.js.map